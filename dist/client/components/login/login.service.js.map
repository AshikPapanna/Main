{"version":3,"sources":["components/login/login.service.ts"],"names":[],"mappings":";;;;;;;;;;;AAAA,wCAAuC;AACvC,wCAAkE;AAClE,gCAAmC;AAEnC,4CAAwC;AACxC,iCAA+B;AAC/B,mCAAiC;AAIjC,IAAa,YAAY,GAAzB;IAEI,YAAoB,IAAS,EAAS,QAAiB;QAAnC,SAAI,GAAJ,IAAI,CAAK;QAAS,aAAQ,GAAR,QAAQ,CAAS;QACrD,IAAI,IAAI,GAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC;QAClD,IAAI,CAAC,KAAK,GAAC,IAAI,IAAG,IAAI,CAAC,KAAK,CAAC;IAE/B,CAAC;IACA,KAAK,CAAC,IAAU;QACb,IAAI,UAAU,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,CAAC,oBAAoB;QAC3D,IAAI,OAAO,GAAG,IAAI,cAAO,CAAC,EAAE,cAAc,EAAE,kBAAkB,EAAE,CAAC,CAAC,CAAC,+BAA+B;QAClG,IAAI,OAAO,GAAG,IAAI,qBAAc,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC,yBAAyB;QACnF,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,CAAC,QAAQ,GAAC,IAAI,GAAC,QAAQ,CAAC,QAAQ,GAAC,CAAC,QAAQ,CAAC,IAAI,GAAG,GAAG,GAAC,QAAQ,CAAC,IAAI,GAAE,EAAE,CAAC,GAAC,SAAS,EAAC,IAAI,EAAC,OAAO,CAAC;aACpG,GAAG,CAAC,CAAC,GAAY;YACjB,IAAI,KAAK,GAAE,GAAG,CAAC,IAAI,EAAE,IAAE,GAAG,CAAC,IAAI,EAAE,CAAC,KAAK,CAAA;YACpC,IAAI,GAAG,GAAC,GAAG,CAAC,IAAI,EAAE,IAAI,GAAG,CAAC,IAAI,EAAE,CAAC,IAAI,CAAA;YACxC,EAAE,CAAA,CAAC,KAAK,CAAC,CACP,CAAC;gBAEC,IAAI,CAAC,KAAK,GAAC,KAAK,CAAC;gBACjB,YAAY,CAAC,OAAO,CAAC,MAAM,EAAC,IAAI,CAAC,SAAS,CAAC,EAAC,IAAI,EAAC,GAAG,EAAC,KAAK,EAAC,KAAK,EAAC,CAAC,CAAC,CAAA;gBACrE,MAAM,CAAC,GAAG,CAAC;YACX,CAAC;YACH,IAAI,CAAA,CAAC;gBACH,MAAM,CAAC,GAAG,CAAC;YACb,CAAC;QACH,CAAC,CAAC;aACzB,KAAK,CAAC,CAAC,KAAS;YACf,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;YACrB,MAAM,CAAE,eAAU,CAAC,KAAK,CAAC,KAAK,IAAE,cAAc,CAAC,CAAA;QAAA,CAAC,CAAC,CAAA;IAElD,CAAC;IACF,MAAM;QACJ,IAAI,CAAC,KAAK,GAAC,IAAI,CAAC;QAChB,YAAY,CAAC,UAAU,CAAC,MAAM,CAAC,CAAC;IAClC,CAAC;IACD,SAAS;QAEP,EAAE,CAAA,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAA,CAAC;YACnC,MAAM,CAAE,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CAAC,KAAK,CAAC;QACrD,CAAC;QACD,IAAI,CACF,CAAC;YACH,MAAM,CAAC,KAAK,CAAC;QACX,CAAC;IACL,CAAC;CACJ,CAAA;AA7CY,YAAY;IADxB,iBAAU,EAAE;qCAGgB,WAAI,EAAkB,iBAAQ;GAF9C,YAAY,CA6CxB;AA7CY,oCAAY","file":"login.service.js","sourcesContent":["import{Injectable} from '@angular/core'\r\nimport {Http,RequestOptions,Headers,Response} from '@angular/http'\r\nimport {Observable} from 'rxjs/Rx';\r\nimport {Login} from '../../../models/login'\r\nimport { Location}from '@angular/common'\r\nimport 'rxjs/add/operator/map';\r\nimport 'rxjs/add/operator/catch';\r\n\r\n\r\n@Injectable()\r\nexport class LoginService{\r\n  public token:string;\r\n    constructor(private http:Http,private location:Location){\r\n      var user=JSON.parse(localStorage.getItem('user'));\r\n      this.token=user&& user.token;\r\n\r\n    }\r\n     login(body:Login):Observable<Login>{\r\n        let bodyString = JSON.stringify(body); // Stringify payload\r\n        let headers = new Headers({ 'Content-Type': 'application/json' }); // ... Set content type to JSON\r\n        let options = new RequestOptions({ headers: headers }); // Create a request optio\r\n      return this.http.post(location.protocol+'//'+location.hostname+(location.port ? ':'+location.port: '')+'/login/',body,options)\r\n                               .map((res:Response)=>\r\n                               {let token =res.json()&&res.json().token\r\n                                   let usr=res.json() && res.json().user\r\n                                if(token)\r\n                                  {\r\n                                    \r\n                                    this.token=token;\r\n                                    localStorage.setItem('user',JSON.stringify({user:usr,token:token}))\r\n                                  return res;\r\n                                  }\r\n                                else{\r\n                                  return res;\r\n                                }\r\n                              })\r\n      .catch((error:any)=>{\r\n        console.log(error);\r\n      return  Observable.throw(error||'server error')})\r\n\r\n     }\r\n    logout():void{\r\n      this.token=null;\r\n      localStorage.removeItem('user');\r\n    }\r\n    islogedin()\r\n    {\r\n      if(localStorage.getItem('user')){\r\n    return  JSON.parse(localStorage.getItem('user')).token;\r\n      }\r\n      else\r\n        {\r\n      return false;\r\n        }\r\n    }\r\n}"]}